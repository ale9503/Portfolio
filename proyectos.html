<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Mis Proyectos</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    /* —— Controles de filtro arriba —— */
    .filter-container {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin: 2rem 0 1rem;
    }
    .filter-container label {
      font-weight: 600;
      margin-right: 0.5rem;
    }
    .filter-container select {
      padding: 0.5rem;
      border-radius: 4px;
      border: 1px solid #ccc;
      font-family: var(--font-family);
    }

    /* —— Detalles del proyecto —— */
    .project-detail {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      margin-bottom: 4rem; /* dejar espacio para la cinta inferior */
    }
    .detail-box {
      background: var(--primary-color);
      color: #fff;
      padding: 1rem;
      border-radius: 4px;
      line-height: 1.4;
    }
    .detail-context {
      flex: none;
    }
    .detail-lower {
      display: flex;
      gap: 1rem;
    }
    .detail-problema {
      flex: 2;
    }
    .detail-middle {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .detail-resultados {
      flex: 2;
    }
  </style>
</head>
<body>
  <aside class="sidebar">
    <div class="photo-container">
      <img src="1.png" alt="Foto de perfil" class="profile-photo">
    </div>
    <div class="contact-info">
      <a href="https://www.alejandrogomezhub.com" target="_blank">Página web</a>
      <a href="mailto:ale.9503@hotmail.com">ale.9503@hotmail.com</a>
      <a href="tel:+573108195437">+57 310 819 5437</a>
    </div>
  </aside>

  <main class="main-content">
    <div class="content-wrapper">

      <h1>Mis Proyectos</h1>

      <!-- 1) filtros -->
      <div class="filter-container">
        <div>
          <label for="project-select">Nombre del proyecto</label><br>
          <select id="project-select">
            <option value="">— Selecciona —</option>
          </select>
        </div>
        <div>
          <label for="year-select">Año</label><br>
          <select id="year-select">
            <option value="">— Selecciona —</option>
          </select>
        </div>
        <a href="index.html" class="btn">PG Proyectos</a>
      </div>

      <!-- 2) zona donde volcamos los datos filtrados -->
      <div class="project-detail" id="detail-container">
        <div class="detail-box detail-context" id="detail-context">
          Selecciona un proyecto…
        </div>
        <div class="detail-box detail-lower">
          <!-- izquierdo: Problema -->
          <div class="detail-problema detail-box" id="detail-problema">
          </div>
          <!-- centro: Herramientas arriba + Habilidades abajo -->
          <div class="detail-middle">
            <div class="detail-box" id="detail-herramientas"></div>
            <div class="detail-box" id="detail-habilidades"></div>
          </div>
          <!-- derecho: Resultados -->
          <div class="detail-resultados detail-box" id="detail-resultados">
          </div>
        </div>
      </div>

    </div>

    <section class="social">
      <a href="https://wa.me/573108195437" class="btn">WhatsApp</a>
      <a href="https://linkedin.com/in/nalejob" class="btn">LinkedIn</a>
    </section>
  </main>

  <script>
    let proyectos = [];

    // 1) cargar el JSON
    fetch('DetallePortafolio.json')
      .then(r => r.json())
      .then(data => {
        proyectos = data;
        poblarFiltros();
      })
      .catch(e => console.error(e));

    // 2) extraer valores únicos y rellenar <select>
    function poblarFiltros() {
      const selP = document.getElementById('project-select');
      const selY = document.getElementById('year-select');

      const nombres = [...new Set(proyectos.map(x => x.Proyecto))].sort();
      const años   = [...new Set(proyectos.map(x => x['Año']))].sort((a,b)=>b-a);

      nombres.forEach(n => {
        const o = new Option(n, n);
        selP.add(o);
      });
      años.forEach(y => {
        const o = new Option(y, y);
        selY.add(o);
      });

      // 3) listeners
      selP.addEventListener('change', filtrar);
      selY.addEventListener('change', filtrar);
    }

    // 4) cuando cambia cualquiera
    function filtrar() {
      const name = document.getElementById('project-select').value;
      const year = document.getElementById('year-select').value;
      // sólo mostrar si coinciden ambos
      const match = proyectos.find(p => p.Proyecto===name && String(p['Año'])===year);
      if (!match) {
        document.getElementById('detail-context').innerText = 'Selecciona un proyecto…';
        document.getElementById('detail-problema').innerText = '';
        document.getElementById('detail-herramientas').innerText = '';
        document.getElementById('detail-habilidades').innerText = '';
        document.getElementById('detail-resultados').innerText = '';
        return;
      }

      // 5) volcar texto
      document.getElementById('detail-context').innerText      = match['Contexto Caso de Uso'];
      document.getElementById('detail-problema').innerText     = match['Problema'];
      document.getElementById('detail-herramientas').innerText = match['Herramientas'];
      document.getElementById('detail-habilidades').innerText  = match['Habilidades'];
      document.getElementById('detail-resultados').innerText   = match['Resultados'];
    }
  </script>
</body>
</html>
