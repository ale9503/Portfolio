<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mis Proyectos</title>

  <!-- IMPORTANTE: apuntar al CSS dentro de css/ -->
  <link rel="stylesheet" href="css/styles.css" />
  [
    {
      "Año": 2025,
      "Proyecto": "Gobierno de datos en equipo MIS (100 personas)",
      "Contexto Caso de Uso": "En una organización multinacional, el seguimiento y la calidad de datos …",
      "Problema": "La falta de un gobierno de datos unificado generaba problemas de consistencia …",
      "Herramientas": "[Excel con VBA]: {automatización …}, [Power Pivot]: {modelado …}",
      "Habilidades": "Gobierno de datos, estructuración jerárquica …",
      "Resultados": "Se logró una visibilidad consolidada …"
    },
    /* … resto de proyectos … */
  ]
  </script>

  <style>
    /* Si quieres, aquí van tus estilos inline específicos de esta página */
  </style>
</head>
<body>
  <aside class="sidebar">
    <div class="photo-container">
      <img src="1.png" alt="Foto de perfil" class="profile-photo" />
    </div>
    <div class="contact-info">
      <a href="https://www.alejandrogomezhub.com" target="_blank">Página web</a>
      <a href="mailto:ale.9503@hotmail.com">ale.9503@hotmail.com</a>
      <a href="tel:+573108195437">+57 310 819 5437</a>
    </div>
  </aside>

  <main class="main-content">
    <div class="content-wrapper">
      <h1>Mis Proyectos</h1>

      <div class="filter-container">
        <div>
          <label for="project-select">Nombre del proyecto</label><br />
          <select id="project-select">
            <option value="">— Selecciona —</option>
          </select>
        </div>
        <div>
          <label for="year-select">Año</label><br />
          <select id="year-select">
            <option value="">— Selecciona —</option>
          </select>
        </div>
        <a href="index.html" class="btn">PG Proyectos</a>
      </div>

      <div class="project-detail">
        <div class="detail-box detail-context" id="detail-context">Selecciona un proyecto…</div>
        <div class="detail-box detail-lower">
          <div class="detail-problema detail-box" id="detail-problema"></div>
          <div class="detail-middle">
            <div class="detail-box" id="detail-herramientas"></div>
            <div class="detail-box" id="detail-habilidades"></div>
          </div>
          <div class="detail-resultados detail-box" id="detail-resultados"></div>
        </div>
      </div>
    </div>

    <section class="social">
      <a href="https://wa.me/573108195437" class="btn">WhatsApp</a>
      <a href="https://linkedin.com/in/nalejob" class="btn">LinkedIn</a>
    </section>
  </main>

  <script>
    // Parseamos el JSON embebido
    const proyectos = JSON.parse(
      document.getElementById('data-json').textContent
    );

    // Rellenar dropdowns
    function poblarFiltros() {
      const selP = document.getElementById('project-select');
      const selY = document.getElementById('year-select');

      const nombres = [...new Set(proyectos.map(x => x.Proyecto))].sort();
      const años    = [...new Set(proyectos.map(x => x['Año']))].sort((a,b)=>b-a);

      nombres.forEach(n => selP.add(new Option(n, n)));
      años   .forEach(y => selY.add(new Option(y, y)));

      selP.addEventListener('change', filtrar);
      selY.addEventListener('change', filtrar);
    }

    // Filtrar y mostrar detalle
    function filtrar() {
      const name = document.getElementById('project-select').value;
      const year = document.getElementById('year-select').value;
      const match = proyectos.find(p => p.Proyecto===name && String(p['Año'])===year);
      const fields = ['Contexto Caso de Uso','Problema','Herramientas','Habilidades','Resultados'];
      const ids    = ['detail-context','detail-problema','detail-herramientas','detail-habilidades','detail-resultados'];

      if (!match) {
        ids.forEach(id => document.getElementById(id).innerText = '');
        document.getElementById('detail-context').innerText = 'Selecciona un proyecto…';
        return;
      }
      fields.forEach((f,i) => {
        document.getElementById(ids[i]).innerText = match[f] || '';
      });
    }

    poblarFiltros();
    
  </script>
  <script>
document.addEventListener('DOMContentLoaded', () => {
  fetch('DetallePortafolio.json')
    .then(response => {
      if (!response.ok) {
        throw new Error(`HTTP ${response.status} – ${response.statusText}`);
      }
      return response.json();
    })
    .then(proyectos => {
      // Resto de tu código original, usando “proyectos”:
      const selP = document.getElementById('project-select');
      const selY = document.getElementById('year-select');
      const nombres = [...new Set(proyectos.map(x => x.Proyecto))].sort();
      const años    = [...new Set(proyectos.map(x => x['Año']))].sort((a,b)=>b-a);
      nombres.forEach(n => selP.add(new Option(n, n)));
      años   .forEach(y => selY.add(new Option(y, y)));
      selP.addEventListener('change', filtrar);
      selY.addEventListener('change', filtrar);

      function filtrar() {
        const name = selP.value;
        const year = selY.value;
        const match = proyectos.find(p => p.Proyecto===name && String(p['Año'])===year);
        const fields = ['Contexto Caso de Uso','Problema','Herramientas','Habilidades','Resultados'];
        const ids    = ['detail-context','detail-problema','detail-herramientas','detail-habilidades','detail-resultados'];
        if (!match) {
          ids.forEach(id => document.getElementById(id).innerText = '');
          document.getElementById('detail-context').innerText = 'Selecciona un proyecto…';
          return;
        }
        fields.forEach((f,i) => {
          document.getElementById(ids[i]).innerText = match[f] || '';
        });
      }
    })
    .catch(err => {
      console.error('Error cargando datos de proyectos:', err);
      document.querySelector('.content-wrapper').innerHTML =
        '<p style="color:red;">No se pudo cargar la lista de proyectos.</p>';
    });
});
</script>
</body>
</html>

